
function array_walk(an_array, lambda) {
  parameter_count = parameterCount(lambda.type)
  if (parameter_count == 2) {   // 1 eval environment + 1 parameter
    foreach(an_array as value) {
      lambda(value)
    }
  } elseif(parameter_count == 3) {  // 1 eval environment + 2 parameters 
    foreach(an_array as key: value) {
      lambda(key, value)
    }
  }
}


// tests

an_array = ["foo", "bar", "baz"]
array_walk(an_array, function(value) {
  echo value
})

dict = {"foo": 3, "bar": 4, "baz": 5}
array_walk(dict, function(key, value) {
  echo key + ": " + value
})
